class BookmarkButton extends HTMLElement{static observedAttributes=["data-time"];connectedCallback(){this.innerHTML='<button id="bookmark-button" commandfor="#bookmark-list" command=""></button>',this.attributeChangedCallback(),this.querySelectorAll("button").forEach(e=>{e.addEventListener("click",t=>{document.querySelector(e.getAttribute("commandfor")).dispatchEvent(new CustomEvent("command",{detail:{page:window.location.pathname,title:document.title,src:e,command:e.getAttribute("command")}}))})})}attributeChangedCallback(){var t=new Bookmarks,e=this.querySelector("button");t.favorite(window.location.pathname)?(e.setAttribute("command","removeFavorite"),e.innerHTML="Retirer la page des favoris"):(e.setAttribute("command","addFavorite"),e.innerHTML="Ajouter la page aux favoris")}}customElements.define("x-bookmark-button",BookmarkButton);class BookmarkList extends HTMLElement{static observedAttributes=["data-time"];connectedCallback(){this.innerHTML='<div id="bookmark-list"></div>',this.attributeChangedCallback(),this.querySelector("div").addEventListener("command",t=>{var e=new Bookmarks;"addFavorite"===t.detail.command&&e.add(t.detail.page,t.detail.title),"removeFavorite"===t.detail.command&&e.remove(t.detail.page),[document.querySelector("#bookmark-list"),document.querySelector("#bookmark-button")].forEach(t=>{t.parentNode.removeAttribute("data-time"),t.parentNode.setAttribute("data-time",Date.now())})})}attributeChangedCallback(){let t="",a=new Bookmarks,o=this.querySelector("#bookmark-list");var e,r=a.list();let i=0;for(e in r)t+=`<input id="bookmark-check-${i}" class="hidden" value="${e}" type="checkbox" ${r[e].status?"checked":""}/>
            <div>
                <a href="${e}">${r[e].title}</a>
                <label for="bookmark-check-${i}"></label>
                <button commandfor="#bookmark-list" command="removeFavorite" value="${e}">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 24C18.6281 24 24 18.6281 24 12C24 5.37188 18.6281 0 12 0C5.37188 0 0 5.37188 0 12C0 18.6281 5.37188 24 12 24ZM7.82812 7.82812C8.26875 7.3875 8.98125 7.3875 9.41719 7.82812L11.9953 10.4062L14.5734 7.82812C15.0141 7.3875 15.7266 7.3875 16.1625 7.82812C16.5984 8.26875 16.6031 8.98125 16.1625 9.41719L13.5844 11.9953L16.1625 14.5734C16.6031 15.0141 16.6031 15.7266 16.1625 16.1625C15.7219 16.5984 15.0094 16.6031 14.5734 16.1625L11.9953 13.5844L9.41719 16.1625C8.97656 16.6031 8.26406 16.6031 7.82812 16.1625C7.39219 15.7219 7.3875 15.0094 7.82812 14.5734L10.4062 11.9953L7.82812 9.41719C7.3875 8.97656 7.3875 8.26406 7.82812 7.82812Z" fill="#232657"/>
                    </svg>
                </button>
            </div>`,i++;o.innerHTML=""+t,this.querySelectorAll('input[type="checkbox"]').forEach(e=>{e.addEventListener("click",t=>{a.update(e.value,e.checked),o.parentNode.removeAttribute("data-time"),o.parentNode.setAttribute("data-time",Date.now())})}),this.querySelectorAll("button").forEach(e=>{e.addEventListener("click",t=>{document.querySelector(e.getAttribute("commandfor")).dispatchEvent(new CustomEvent("command",{detail:{page:e.value,src:e,command:e.getAttribute("command")}}))})})}}customElements.define("x-bookmark-list",BookmarkList);class Bookmarks{constructor(t,e){this.key="bookmarks-"+_userdata.user_id}list(){return String.load(this.key)}favorite(t){return this.list().hasOwnProperty(t)}add(t,e){var a=this.list();a[t]={title:e,status:!1},String.save(this.key,a)}update(t,e){var a=this.list();a[t].status=e,String.save(this.key,a)}remove(t){var e=this.list();delete e[t],String.save(this.key,e)}}String.load=(t,e={})=>{t=window.localStorage.getItem(t);return null!==t?"object"==typeof e?JSON.parse(t):"boolean"==typeof e?"false"!==t&&("true"===t||t):t:e},String.save=(t,e,a={})=>{"object"==typeof a&&(e=JSON.stringify(e)),window.localStorage.setItem(t,e)},String.remove=t=>{window.localStorage.removeItem(t)};